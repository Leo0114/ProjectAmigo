---
import Botton from "@components/layout/Botton.astro";
import Return from "@components/layout/Return.astro";
import Layout from "@layouts/Layout.astro";
import { Image } from "astro:assets";
import { type CollectionEntry, getCollection } from "astro:content";

export async function getStaticPaths() {
  const weeks = await getCollection("weeks");
  const paths = weeks.map((week) => {
    return {
      params: {
        slug: week.slug,
      },
      props: {
        week,
      },
    };
  });
  return paths;
}
type Props = { week: CollectionEntry<"weeks"> };
const { week } = Astro.props;
const imagen = `week ${week.slug} image`;
const titulo = `week ${week.slug} title`;
---

<Layout title={week.data.title}>
  <Return link="/serviceWeeks#week" />
  <div
    class="container max-w-[1400px] my-24 mx-auto md:px-6 prose-xl transition-all duration-300 dark:text-slate-300 text-slate-950"
  >
    <section class="mb-32 items-center">
      <Image
        src={week.data.cover}
        class="mb-6 lg:w-1/3 w-fit mx-auto rounded-lg shadow-lg dark:shadow-black/20"
        transition:name={imagen}
        alt={week.data.coverAlt}
        quality={"mid"}
        format="avif"
        loading={"lazy"}
      />

      <div class="mx-auto px-4 text-center">
        <Botton
          name="Registrar aquÃ­"
          link="https://interland3.donorperfect.net/weblink/WebLink.aspx?name=E55454&id=19"
        />
      </div>
      <div class="mb-6 flex items-center">
        <div>
          <p class="dark:text-sky-400 text-sky-600">{week.data.dia}</p>
          <p>Encargado: {week.data.encargado}</p>
          <a
            target="_blank"
            href=`mailto:${week.data.correoEncargado}`
            class="font-medium dark:text-sky-400 text-sky-600 underline"
            >{week.data.correoEncargado}</a
          >
        </div>
      </div>
      <h1 class="mb-6 text-3xl font-extrabold" transition:name={titulo}>
        {week.data.title}
      </h1>

      <p>
        {week.body}
      </p>
    </section>
  </div>
</Layout>
